{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Oppilas1\\\\Desktop\\\\Project\\\\Group-Project\\\\front-end\\\\src\\\\pages\\\\Joukkueet.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport JoukkueetTable from \"../components/joukkueetTable.tsx\";\nimport \"../styles/taulukko.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Joukkueet() {\n  _s();\n  // State for storing the selected file\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  // Reference for hidden file input\n  const fileInputRef = useRef(null);\n\n  // Trigger hidden file input when clicking \"Valitse tiedosto\"\n  const handleFileButtonClick = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n\n  // Handle file selection\n  const handleFileSelect = event => {\n    const file = event.target.files[0];\n    if (file) {\n      // Ensure the file is a CSV\n      if (!file.name.endsWith(\".csv\")) {\n        alert(\"Vain CSV-tiedostot ovat sallittuja.\");\n        return;\n      }\n      setSelectedFile(file);\n    }\n  };\n\n  // Handle file upload\n  const handleSubmit = async event => {\n    event.preventDefault();\n    if (!selectedFile) return;\n    const formData = new FormData();\n    formData.append(\"csvFile\", selectedFile);\n    try {\n      const response = await fetch(\"http://localhost:3001/upload-endpoint\", {\n        method: \"POST\",\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(\"Virhe tiedoston latauksessa\");\n      }\n      alert(\"CSV-tiedosto ladattu onnistuneesti.\");\n      setSelectedFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = \"\";\n      }\n    } catch (error) {\n      alert(`Virhe ladattaessa CSV-tiedostoa:\\n${error.message}`);\n    }\n  };\n  if (localStorage.getItem(\"admin\") === true) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Joukkueet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(JoukkueetTable, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upload-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Lataa CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"upload-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \".csv\",\n            style: {\n              display: \"none\"\n            },\n            ref: fileInputRef,\n            onChange: handleFileSelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"upload-button\",\n            onClick: handleFileButtonClick,\n            children: selectedFile ? selectedFile.name : \"Valitse tiedosto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"submit-button\",\n            disabled: !selectedFile,\n            children: \"Lataa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"100%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Joukkueet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(JoukkueetTable, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n}\n_s(Joukkueet, \"hhxgHKAK5BrX2AE4ZC4QwC5gB5A=\");\n_c = Joukkueet;\nexport default Joukkueet;\nvar _c;\n$RefreshReg$(_c, \"Joukkueet\");","map":{"version":3,"names":["React","useState","useRef","JoukkueetTable","jsxDEV","_jsxDEV","Joukkueet","_s","selectedFile","setSelectedFile","fileInputRef","handleFileButtonClick","current","click","handleFileSelect","event","file","target","files","name","endsWith","alert","handleSubmit","preventDefault","formData","FormData","append","response","fetch","method","body","ok","Error","value","error","message","localStorage","getItem","style","width","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","accept","display","ref","onChange","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/Oppilas1/Desktop/Project/Group-Project/front-end/src/pages/Joukkueet.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\r\nimport JoukkueetTable from \"../components/joukkueetTable.tsx\";\r\nimport \"../styles/taulukko.css\";\r\n\r\nfunction Joukkueet() {\r\n  // State for storing the selected file\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  // Reference for hidden file input\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Trigger hidden file input when clicking \"Valitse tiedosto\"\r\n  const handleFileButtonClick = () => {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  };\r\n\r\n  // Handle file selection\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      // Ensure the file is a CSV\r\n      if (!file.name.endsWith(\".csv\")) {\r\n        alert(\"Vain CSV-tiedostot ovat sallittuja.\");\r\n        return;\r\n      }\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  // Handle file upload\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!selectedFile) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"csvFile\", selectedFile);\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:3001/upload-endpoint\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Virhe tiedoston latauksessa\");\r\n      }\r\n\r\n      alert(\"CSV-tiedosto ladattu onnistuneesti.\");\r\n      setSelectedFile(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = \"\";\r\n      }\r\n    } catch (error) {\r\n      alert(`Virhe ladattaessa CSV-tiedostoa:\\n${error.message}`);\r\n    }\r\n  };\r\n\r\n  if (localStorage.getItem(\"admin\")===true) {\r\n    return (\r\n      <div style={{ width: \"100%\" }}>\r\n        <div className=\"table-container\">\r\n          <h2>Joukkueet</h2>\r\n          <JoukkueetTable />\r\n        </div>\r\n        <div className=\"upload-container\">\r\n          <h2>Lataa CSV</h2>\r\n          <form onSubmit={handleSubmit} className=\"upload-form\">\r\n            {/* Hidden file input */}\r\n            <input\r\n              type=\"file\"\r\n              accept=\".csv\"\r\n              style={{ display: \"none\" }}\r\n              ref={fileInputRef}\r\n              onChange={handleFileSelect}\r\n            />\r\n            {/* Button to open file explorer */}\r\n            <button type=\"button\" className=\"upload-button\" onClick={handleFileButtonClick}>\r\n              {selectedFile ? selectedFile.name : \"Valitse tiedosto\"}\r\n            </button>\r\n            {/* Submit button (enabled only when a file is selected) */}\r\n            <button type=\"submit\" className=\"submit-button\" disabled={!selectedFile}>\r\n              Lataa\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div style={{ width: \"100%\" }}>\r\n        <div className=\"table-container\">\r\n          <h2>Joukkueet</h2>\r\n          <JoukkueetTable />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Joukkueet;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}